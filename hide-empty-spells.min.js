const debugHE=!0;let hideEmpty=!1;function log(message,level){2==level&&debugHE&&console.log("%cHeroVau.lt/Foundry Bridge | %ccheckUserToken: "+JSON.stringify(responseJSON),hvColor1,hvColor4)}function addButton(html,hide=1){hidetitle="Hide Empty Spell Casting Entries",hidefa="eye-slash",showtitle="Show Empty Spell Casting Entries",showfa="eye";$(html).attr("id");var newButton=html.find("[data-tab='spellbook']"),button=$(newButton).find("ol.singleColumn-list"),newButton='<li class="item inventory-header spellbook-header spellbook-empty" draggable="true"><div class="item-controls pf-bluelist pf-add-item-row"><a class="item-control spellcasting-create" id="showspells" title="'+hidetitle+'" ><i class="fas fa-'+hidefa+'"></i>'+hidetitle+"</a></div></li>";$(button).append(newButton),newButton='<li class="item inventory-header spellbook-header spellbook-empty" draggable="true"><div class="item-controls pf-bluelist pf-add-item-row"><a class="item-control spellcasting-create" id="hidespells" title="'+showtitle+'" ><i class="fas fa-'+showfa+'"></i>'+showtitle+"</a></div></li>",$(button).append(newButton),(1==hide?html.find("#showspells"):html.find("#hidespells")).hide(),$("#hidespells").on("click",function(){game.settings.set("hide-empty-spells","hideEmpty",!1),html.find("#hidespells").hide(),html.find("#showspells").show(),showEmptySpells(html)}),$("#showspells").on("click",function(){game.settings.set("hide-empty-spells","hideEmpty",!0),html.find("#hidespells").show(),html.find("#showspells").hide(),hideEmptySpells(html)})}function hideEmptySpells(html){let spellsPage=html.find("[data-tab='spellbook']");var spellContainers=spellsPage.find('[data-container-type="spellcastingEntry"]');for(let x=0;x<spellContainers.length;x++){var spellBox=spellContainers[x],spellcastingEntry=$(spellBox).find("ol.inventory-list.directory-list");for(let y=0;y<spellcastingEntry.length;y++){var spellLevel=$(spellcastingEntry).find("li.item.inventory-header.spellbook-header");for(let z=0;z<spellLevel.length;z++)"0"==$(spellLevel[z]).find("span.spell-max-input input").val()&&($(spellLevel[z]).hide(),$(spellLevel[z]).nextUntil("item.inventory-header.spellbook-header").hide())}}}function showEmptySpells(html){let spellsPage=html.find("[data-tab='spellbook']");var spellContainers=spellsPage.find('[data-container-type="spellcastingEntry"]');for(let x=0;x<spellContainers.length;x++){var spellBox=spellContainers[x],spellcastingEntry=$(spellBox).find("ol.inventory-list.directory-list");for(let y=0;y<spellcastingEntry.length;y++){var spellLevel=$(spellcastingEntry).find("li.item.inventory-header.spellbook-header");for(let z=0;z<spellLevel.length;z++){$(spellLevel[z]).find("span.spell-max-input input").val();$(spellLevel[z]).show(),$(spellLevel[z]).nextUntil("item.inventory-header.spellbook-header").show()}}}}Hooks.on("ready",async function(){game.settings.register("hide-empty-spells","hideEmpty",{name:"hideempty",scope:"client",config:!1,type:String,default:"false"})}),Hooks.on("renderActorSheet",function(obj,html){"character"===obj.actor.data.type&&(hideEmpty=game.settings.get("hide-empty-spells","hideEmpty"),console.log("hideEmpty: "+hideEmpty),"true"==hideEmpty?(console.log("hiding all"),addButton(html),hideEmptySpells(html)):(console.log("showing all"),addButton(html,0),showEmptySpells(html)))});